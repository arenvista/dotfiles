# --- General Settings ---
set -g prefix C-a
unbind C-b
bind-key C-a send-prefix
set-option -g default-shell /bin/zsh
set -g mouse on
set -g allow-passthrough on
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# --- Panes & Windows ---
unbind %
bind | split-window -h -c "#{pane_current_path}"
unbind '"'
bind - split-window -v -c "#{pane_current_path}"

bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r h resize-pane -L 5
bind -r l resize-pane -R 5
bind -r m resize-pane -Z

# --- Copy Mode (vi) ---
set-window-option -g mode-keys vi
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'wl-copy'
unbind -T copy-mode-vi MouseDragEnd1Pane

# --- Config Reload ---
unbind r
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# --- Plugins ---
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'sainnhe/tmux-fzf'
# set -g @plugin '2kabhishek/tmux2k'

# --- Pywal Integration for tmux2k ---
# color0 = bg, color7 = fg, color4 = blue/accent, color2 = green/active
# set -g @tmux2k-bg-main "colour0"
# set -g @tmux2k-bg-alt "colour8"
# set -g @tmux2k-text "colour7"
#
# # Pane Borders (Pywal colors)
# set -g @tmux2k-pane-border "colour8"
# set -g @tmux2k-pane-active-border "colour4"
#
# # Plugin Colors: "foreground background"
# set -g @tmux2k-group1-colors "colour0 colour4" 
# set -g @tmux2k-group2-colors "colour0 colour6"
# set -g @tmux2k-group3-colors "colour0 colour5"
#
# # UI Elements
# set -g @tmux2k-show-powerline false
# set -g @tmux2k-icons-only true
# set -g @tmux2k-compact-windows true
# set -g @tmux2k-start-icon 'session'
#
# # Plugin Sections
# set -g @tmux2k-left-plugins "git"
# set -g @tmux2k-right-plugins "network time"

# --- Manual Overrides for Pure Pywal Look ---
set -g status-style bg=default # Allows transparency if your terminal has it
set -g pane-border-style fg=colour8
set -g pane-active-border-style fg=colour4
setw -g window-status-current-style fg=colour4,bold

# Initialize TPM (Keep at bottom)
run '~/.tmux/plugins/tpm/tpm'
